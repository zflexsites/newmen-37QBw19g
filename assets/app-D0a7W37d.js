const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DJex4OoF.js","assets/analytics-Dfyu_B3T.js","assets/router-DNvg7vsX.js","assets/dialog-BU67H1bK.js","assets/checkout-B31oVOWY.js","assets/order-success-xhv1gwzY.js","assets/main-BmpS9WZj.css"])))=>i.map(i=>d[i]);
/* empty css             */const P="modulepreload",g=function(s){return"/"+s},_={},m=function(d,r,o){let e=Promise.resolve();if(r&&r.length>0){let f=function(n){return Promise.all(n.map(c=>Promise.resolve(c).then(l=>({status:"fulfilled",value:l}),l=>({status:"rejected",reason:l}))))};document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),a=t?.nonce||t?.getAttribute("nonce");e=f(r.map(n=>{if(n=g(n),n in _)return;_[n]=!0;const c=n.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${l}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":P,c||(u.as="script"),u.crossOrigin="",u.href=n,a&&u.setAttribute("nonce",a),document.head.appendChild(u),c)return new Promise((v,h)=>{u.addEventListener("load",v),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${n}`)))})}))}function i(t){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=t,window.dispatchEvent(a),!a.defaultPrevented)throw t}return e.then(t=>{for(const a of t||[])a.status==="rejected"&&i(a.reason);return d().catch(i)})};let w=!1;async function p(){const d=document.querySelector("#app-content [data-page-type]")?.dataset?.pageType||"unknown";switch(console.log(`[Pulse] Hydrating: "${d}"`),document.querySelectorAll(".marquee-container:not([data-hydrated]), .pulse-marquee:not([data-hydrated])").forEach(o=>{const e=o.innerHTML;o.innerHTML=e+e+e,o.dataset.hydrated="true"}),L(),d){case"cart":const{cart:o}=await m(async()=>{const{cart:t}=await import("./index-DJex4OoF.js");return{cart:t}},__vite__mapDeps([0,1,2,3]));o.initCartPage();break;case"checkout":const{initCheckout:e}=await m(async()=>{const{initCheckout:t}=await import("./checkout-B31oVOWY.js");return{initCheckout:t}},__vite__mapDeps([4,1,2]));e();break;case"order-success":const{initOrderSuccess:i}=await m(async()=>{const{initOrderSuccess:t}=await import("./order-success-xhv1gwzY.js");return{initOrderSuccess:t}},__vite__mapDeps([5,1,3,6]));i();break}}async function E(){if(w)return;console.log("⚡ PULSE LABS — Ignition Sequence...");const s=new URLSearchParams(window.location.search).get("preview")==="true",{cart:d,analytics:r,router:o,stacy:e,dialog:i}=await m(async()=>{const{cart:t,analytics:a,router:f,stacy:n,dialog:c}=await import("./index-DJex4OoF.js");return{cart:t,analytics:a,router:f,stacy:n,dialog:c}},__vite__mapDeps([0,1,2,3]));if(i.initDialog(),y(),window.addEventListener("cartUpdated",()=>{y()}),s||(d.initGlobalCart(),r.initAnalytics(),o.initRouter(),e.initStacy(o)),s){const{initPreviewMode:t}=await m(async()=>{const{initPreviewMode:a}=await import("./preview-QBKspGf7.js");return{initPreviewMode:a}},[]);t(p),document.body.classList.add("is-preview-mode")}window.addEventListener("zflex:page-loaded",()=>{p()}),p(),w=!0}async function y(){const s=document.getElementById("cart-counter");if(!s)return;const{cart:d}=await m(async()=>{const{cart:e}=await import("./index-DJex4OoF.js");return{cart:e}},__vite__mapDeps([0,1,2,3])),o=d.getCart().reduce((e,i)=>e+(i.quantity||0),0);s.textContent=String(o)}async function L(){document.querySelectorAll("[data-add-to-cart]:not([data-attached])").forEach(d=>{const r=d;r.addEventListener("click",async o=>{o.preventDefault();const e=r.dataset.addToCart;if(e){r.disabled=!0,console.log(`[Pulse] Adding product ${e} to cart`);try{const{api:i,eventBus:t,cart:a}=await m(async()=>{const{api:c,eventBus:l,cart:u}=await import("./index-DJex4OoF.js");return{api:c,eventBus:l,cart:u}},__vite__mapDeps([0,1,2,3])),n=(await i.fetchProductIndex()).find(c=>c.id===e);n&&(a.addItem(n),y(),(t.eventBus||t).dispatchEvent(new CustomEvent("dialog:show",{detail:{title:"UNITÉ SÉCURISÉE",message:`${n.title} a été ajouté à votre drop.`,variant:"success"}})))}catch(i){console.error("[Pulse] Add to cart failed",i)}finally{r.disabled=!1}}}),r.setAttribute("data-attached","true")})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",E,{once:!0}):E();export{m as _};
